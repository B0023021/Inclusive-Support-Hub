<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>意思疎通サポート | Inclusive Support Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="../../theme.css">
<script src="../../settings-common.js" defer></script>

</head>
<body>
  <main class="comm-main">
    <header class="comm-header">
      <h1>意思疎通サポート</h1>
      <p>リアルタイム文字化・コミュニケーションボード・AI環境認識で対面コミュニケーションを支援します。</p>
    </header>

    <!-- 上段：左リアルタイム文字化 / 右コミュボード -->
    <section class="comm-grid">
      <!-- リアルタイム文字化 -->
      <article class="card">
        <h2>リアルタイム文字化</h2>
        <p class="note">
          マイクから声を拾って、リアルタイムで文字起こしします（Web Speech API / Chrome推奨）。
        </p>
        <div class="stt-controls">
          <button id="sttStartBtn" class="btn primary small">音声入力開始</button>
          <button id="sttStopBtn" class="btn ghost small">停止</button>
          <span id="sttStatus" class="status-pill">準備中…</span>
        </div>
        <textarea id="sttOutput" rows="7" class="mono" placeholder="ここに話した内容が表示されます。"></textarea>
      </article>

      <!-- コミュニケーションボード -->
      <article class="card">
        <h2>コミュニケーションボード</h2>
        <p class="note">
          よく使うフレーズをテンプレ＋自由追加で登録し、タップすると音声で読み上げます。
        </p>
        <form id="phraseForm" class="inline-form">
          <input
            id="phraseInput"
            type="text"
            placeholder="例：ゆっくり話してください"
            autocomplete="off"
          />
          <button type="submit" class="btn primary small">追加</button>
        </form>
        <div class="small-toggle">
          <label>
            <input type="checkbox" id="autoSpeakToggle" checked />
            追加したフレーズをすぐ読み上げる
          </label>
        </div>
        <div id="phraseList" class="chip-list" aria-label="登録済みフレーズ"></div>
      </article>
    </section>

    <!-- 下段：AI 環境認識 -->
    <section class="card">
      <h2>AI環境認識</h2>
      <p class="note">
        カメラに映ったものをサーバ上のAIが判定し、テキストで説明します。<br />
        実際の判定は <code>/api/env-analyze</code> エンドポイントの実装とAPIキー設定が必要です。
      </p>

      <div class="env-grid">
        <!-- 左：カメラ映像 -->
        <div class="env-video">
          <video id="envVideo" autoplay playsinline></video>
          <div class="env-controls">
            <button id="envCameraBtn" class="btn primary small">
              カメラ開始 / 停止
            </button>
            <button id="envAnalyzeBtn" class="btn ghost small">
              AIに今の状況を説明してもらう
            </button>
          </div>
          <div class="small-toggle">
            <label>
              <input type="checkbox" id="envSpeakToggle" checked />
              説明文を自動で読み上げる
            </label>
          </div>
        </div>

        <!-- 右：説明テキスト -->
        <div class="env-text">
          <label for="envDescription">環境の説明</label>
          <textarea
            id="envDescription"
            rows="7"
            class="mono"
            placeholder="ここにAIからの説明が表示されます。"
          ></textarea>
          <div class="env-speak-row">
            <button id="envSpeakOnceBtn" class="btn ghost small">
              今の説明を読み上げる
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>

<script src="../../settings-common.js"></script>
<script src="app.js"></script>

</body>
</html>
