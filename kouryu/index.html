<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>障害者支援アプリ – 交流</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- 外部CSS（同じフォルダの community.css を読む） -->
  <link rel="stylesheet" href="./styles.css">
  <link rel="stylesheet" href="../../theme.css">
<script src="../../settings-common.js" defer></script>

</head>

<body class="text-slate-800 bg-slate-50">
  <header class="max-w-5xl mx-auto px-4 pt-8 pb-4">
    <div class="flex justify-between items-center">
      <div>
        <p class="text-sm text-slate-500">交流（コミュニティ / 情報・資料）</p>
      </div>
      <div class="flex gap-2">
        <!-- 生活へリンクは親タブで制御するので削除 -->
        <button id="adminToggle" class="px-3 py-1.5 rounded-lg bg-slate-100 text-slate-600">
          管理者モード
        </button>
      </div>
    </div>

    <!-- タブ -->
    <div class="mt-4 grid grid-cols-2 gap-2 soft-card bg-white p-2">
      <button id="tabCommunity" class="rounded-full bg-blue-600 text-white font-semibold px-4 py-2">
        コミュニティ
      </button>
      <button id="tabInfo" class="rounded-full bg-slate-100 text-slate-700 px-4 py-2">
        情報・資料
      </button>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 pb-24 space-y-6">
    <!-- === コミュニティ === -->
    <section id="sectionCommunity" class="space-y-6">

      <!-- 掲示板 -->
      <section class="soft-card bg-white p-4 sm:p-6">
        <div class="flex justify-between mb-3">
          <h2 class="text-lg font-bold">コミュニティ掲示板</h2>
          <!-- ソート兼フィルタ（community.js 側で使用） -->
          <select id="filterGroup" class="border rounded-lg px-3 py-1.5 text-sm bg-white">
            <option value="">すべて</option>
            <option value="likes">いいねの多い順</option>
            <option value="new">新着順</option>
            <option value="relevance">関連度</option>
          </select>
        </div>

        <div class="grid gap-2 sm:grid-cols-[1fr_auto]">
          <input
            id="postText"
            type="text"
            placeholder="新しい投稿を作成（Enterで送信）"
            class="border rounded-lg px-3 py-2 bg-white"
          />
          <button
            id="postBtn"
            class="rounded-lg bg-slate-900 text-white px-4 py-2 font-semibold"
          >
            投稿
          </button>
        </div>
        <ul id="postList" class="mt-4 space-y-3"></ul>
      </section>
    </section>

    <!-- === 情報・資料 === -->
    <section id="sectionInfo" class="space-y-6 hidden">
      <section class="soft-card bg-white p-4 sm:p-6">
        <div class="flex justify-between items-center mb-3">
          <h2 class="text-lg font-bold">役立つ情報・資料</h2>
          <div class="flex gap-2">
            <!-- 管理者のみ表示 -->
            <button
              id="addResourceBtn"
              class="admin-only hidden rounded-lg bg-slate-100 px-3 py-1.5 text-sm"
            >
              資料を追加
            </button>
            <button id="seeAllBtn" class="rounded-lg bg-slate-100 px-3 py-1.5 text-sm">
              すべて表示
            </button>
          </div>
        </div>
        <ul id="resList" class="space-y-3"></ul>
      </section>
    </section>
  </main>

  <!-- === 情報カードテンプレート === -->
  <template id="resItemTpl">
    <li class="p-3 border rounded-lg hover:bg-slate-50">
      <div class="font-semibold res-title"></div>
      <p class="text-sm text-slate-600 mt-1 line-clamp-2 res-summary"></p>
      <div class="text-xs text-slate-500 mt-1">
        <span class="res-reads">0</span>人が読みました
      </div>
      <div class="mt-3">
        <a
          class="open-btn rounded-lg bg-blue-600 text-white px-4 py-2 font-semibold"
          target="_blank"
        >
          開く
        </a>
      </div>
    </li>
  </template>

  <script src="../../settings-common.js"></script>
  <script src="./app.js" defer></script>
</body>
</html>
